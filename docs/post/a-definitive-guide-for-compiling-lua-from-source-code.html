<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Compiling Lua from the source code is an extremely easy procedure and every beginner in programming can do it, without any problems. Here is a detailed guide on how to compile Lua from the source code. " name=description><meta content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal" name=keywords><meta content="Dmitri Smirnov" name=author><meta content=website property=og:type><meta content=https://www.whoop.ee/post/a-definitive-guide-for-compiling-lua-from-source-code.html property=og:url><meta content=https://www.whoop.ee/assets/img/whoopee-logo.png property=og:image><meta content="script-src 'self'" http-equiv=Content-Security-Policy><meta content="object-src 'none'" http-equiv=Content-Security-Policy><title>A definitive guide for compiling Lua from source code — Whoopee</title><link as=font href=/assets/fonts/Perfect_DOS_VGA_437.woff2 rel=preload><link href=/favicon.ico rel=icon type=image/x-icon><link href=/assets/css/styles.min.css rel=stylesheet><link title="RSS Feed" href=/feed.xml rel=alternate type=application/rss+xml><link href=https://www.whoop.ee/post/a-definitive-guide-for-compiling-lua-from-source-code.html rel=canonical><body><header><a href=/><img alt=Whoopee class=logo height=172 src=/assets/img/whoopee-logo.png width=200></a><nav class=mainmenu><a href=/me/>About</a><a href=/feed.xml>RSS</a></nav></header><main><a href=/>← Back to the index page</a><article><h1>A definitive guide for compiling Lua from source code</h1><time datetime=2024-07-11> July 11, 2024 </time><div><input class=toc-toggle id=toc-toggle type=checkbox><label for=toc-toggle>Table of contents</label></div><div class=toc><ul><li><a href=#a-definitive-guide-for-compiling-lua-from-source-code>A definitive guide for compiling Lua from source code</a><ul><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#download-the-source-code>Download the source code</a><li><a href=#compiler>Compiler</a><ul><li><a href=#linux>Linux</a><li><a href=#macos>MacOS</a><li><a href=#windows>Windows</a></ul></ul><li><a href=#compilation>Compilation</a><ul><li><a href=#building-lua>Building Lua</a></ul><li><a href=#testing-installation>Testing installation</a><li><a href=#getting-help>Getting help</a><li><a href=#advanced-compilation>Advanced compilation</a></ul></ul></div><p>Compiling Lua from the source code is an extremely easy procedure and every beginner in programming can do it, without any problems. I would introduce my guide on how to compile Lua from the source code.<h2 id=prerequisites>Prerequisites<a title="Permanent link" class=headerlink href=#prerequisites>#</a></h2><ul><li>Source Code;<li>C compiler;<li>Make utility (optional, usually together installed with C compiler);<li><code>tar</code> command installed or any other archive manager which supports <code>.tar</code> format (optional).</ul><h3 id=download-the-source-code>Download the source code<a title="Permanent link" class=headerlink href=#download-the-source-code>#</a></h3><p>Lua is a completely <a href=https://opensource.org/license/mit>free-to-use language (MIT license)</a> and its source code can be downloaded from <a href=https://www.lua.org/ftp/>the official website</a>. Let’s assume that we use the latest version in this case it is <code>5.4.7</code>.<h3 id=compiler>Compiler<a title="Permanent link" class=headerlink href=#compiler>#</a></h3><p>Lua is written in <a href=https://en.wikipedia.org/wiki/ANSI_C>ANSI C</a>, so we will need any C compiler that can compile ANSI C code. I prefer to use <a href=https://gcc.gnu.org/>https://gcc.gnu.org/</a>.<h4 id=linux>Linux<a title="Permanent link" class=headerlink href=#linux>#</a></h4><p>For Debian-based GNU/Linux, you can install it with <code>apt</code> command:<div class=codehilite><pre><span></span><code>sudo<span class=w> </span>apt<span class=w> </span>install<span class=w> </span>build-essential
</code></pre></div><p>For the GNU/Linux using a DNF package manager like Fedora:<div class=codehilite><pre><span></span><code>sudo<span class=w> </span>dnf<span class=w> </span>install<span class=w> </span>gcc
</code></pre></div><h4 id=macos>MacOS<a title="Permanent link" class=headerlink href=#macos>#</a></h4><ul><li>On MacOS need to have <a href=https://brew.sh>brew package manage</a> then use the command:</ul><div class=codehilite><pre><span></span><code>brew<span class=w> </span>install<span class=w> </span>gcc
</code></pre></div><ul><li>Also, XCode Command Line Tools is needed for MacOS.</ul><div class=codehilite><pre><span></span><code>xcode-select<span class=w> </span>--install
</code></pre></div><h4 id=windows>Windows<a title="Permanent link" class=headerlink href=#windows>#</a></h4><p>For Windows, there might be different options: <a href=https://sourceforge.net/projects/mingw/>MinGW</a>, <a href=https://github.com/iovisor/bcc>BPF Compiler Collection (BCC)</a>, etc.<div class="admonition tip"><p class=admonition-title>Tip<p>Windows users probably should follow different procedures. Lua initially is designed to run on a Unix-like system, but the general logic should be very similar to Microsoft Windows.</div><h2 id=compilation>Compilation<a title="Permanent link" class=headerlink href=#compilation>#</a></h2><p>After we download the <a href=https://www.lua.org/ftp/>source code</a>, follow the steps from a terminal:<ul><li>Go to the Download directory (let us assume that it is <code>~/Downloads/</code>).</ul><div class=codehilite><pre><span></span><code><span class=nb>cd</span><span class=w> </span>~/Downloads/
</code></pre></div><ul><li>Extract contents for the archive <code>lua-5.4.7.tar.gz</code> with <code>tar</code> command or any other your archive manager:</ul><div class=codehilite><pre><span></span><code>tar<span class=w> </span>xvf<span class=w> </span>lua-5.4.7.tar.gz
</code></pre></div><ul><li>A new directory <code>lua-5.4.7/</code> with Lua’s source code is created.</ul><div class=codehilite><pre><span></span><code>ls<span class=w> </span>-l
><span class=w> </span>doc/
><span class=w> </span>src/
><span class=w> </span>Makefile
><span class=w> </span>README
</code></pre></div><h3 id=building-lua>Building Lua<a title="Permanent link" class=headerlink href=#building-lua>#</a></h3><p>There is a command to detect your OS <code>make help</code> will print the supported operating systems.<div class=codehilite><pre><span></span><code>make<span class=w> </span><span class=nb>help</span>
><span class=w> </span>guess<span class=w> </span>aix<span class=w> </span>bsd<span class=w> </span>c89<span class=w> </span>freebsd<span class=w> </span>generic<span class=w> </span>ios<span class=w> </span>linux<span class=w> </span>linux-readline<span class=w> </span>macosx<span class=w> </span>mingw<span class=w> </span>posix<span class=w> </span>solaris
</code></pre></div><p>Let’s assume that we are on Linux and we have to use 4 threads for <code>make</code>.<div class=codehilite><pre><span></span><code>make<span class=w> </span>-j4<span class=w> </span>linux
</code></pre></div><p>Once it is compiled it can be installed also with <code>make</code>:<div class=codehilite><pre><span></span><code>sudo<span class=w> </span>make<span class=w> </span>install
</code></pre></div><p>By default (<code>INSTALL_TOP=/usr/local</code>) following files will be installed:<ul><li><code>lua, luac</code> -> <code>/usr/local/bin</code><li><code>lua.h, luaconf.h, lualib.h, lauxlib.h, lua.hpp</code> -> <code>/usr/local/include</code><li><code>liblua.a</code> -> <code>/usr/local/lib</code><li><code>lua.1, luac.1</code> -> <code>/usr/local/man/man1</code></ul><p>There is possible to change the path where Lua is installed, where <code>xxx</code> is the desired path in the file system.<div class=codehilite><pre><span></span><code><span class=nv>INSTALL_TOP</span><span class=o>=</span>xxx<span class=w> </span>make<span class=w> </span>install
</code></pre></div><h2 id=testing-installation>Testing installation<a title="Permanent link" class=headerlink href=#testing-installation>#</a></h2><p>Now Lua is available in your system:<div class=codehilite><pre><span></span><code>lua -v
> Lua 5.4.7  Copyright (C) 1994-2024 Lua.org, PUC-Rio
</code></pre></div><p>If you see similar output in the terminal then congratulations you have compiled and installed Lua from the source code successfully!<h2 id=getting-help>Getting help<a title="Permanent link" class=headerlink href=#getting-help>#</a></h2><p>In case you get stuck, then open the file in the downloaded source code directory <code>doc/readme.html</code>. This readme is a good starting point to get help.<h2 id=advanced-compilation>Advanced compilation<a title="Permanent link" class=headerlink href=#advanced-compilation>#</a></h2><p>There is an option to set up Lua compilation with a variety of needs. For example, change the default buffer size or use only integers for numbers, change integer size to 32, 64-bits (with some tricks even 8 and 16 bits), float precision, memory limits, and lots more. Such a custom setup might be useful for microcontrollers and other <abbr title="Internet Of Things">IoT</abbr> microdevices.<p>There is a file <code>src/luaconf.h</code> where all such settings are set. The file is pretty large and there is no point to go here through it. I would recommend opening in your text editor and just going through and checking what potential options are there.<p>Modifying <code>src/luaconf.h</code> is a good practice to try different setups and help better understand does Lua works internally.<h2>Feedback</h2><p>For feedback, please check the <a href=/me/>contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</article><a href=/>← Back to the index page</a></main><footer><hr><p>(c) 2022-2025 <a href=/me/>xdknight</a> Powered by <a href=https://github.com/hmngwy/jenny>Jenny</a> shell blog engine.<p>Any images on this website may be used, copied and redistributed under the <a href=https://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a> license.<p>Any code on this website may be used, copied and redistributed under the <a href=https://opensource.org/license/MIT>MIT</a> license.<p>This website does not use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</footer>