<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Compiling Lua from the source code is an extremely easy procedure and every beginner in programming can do it, without any problems. Here is a detailed guide on how to compile Lua from the source code. "><meta name="keywords" content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal"><meta name="author" content="Dmitri Smirnov"><meta property="og:type" content="website"><meta property="og:url" content="https://www.whoop.ee/post/a-definitive-guide-for-compiling-lua-from-source-code.html"><meta property="og:image" content="https://www.whoop.ee/assets/img/lua-language.gif"><meta http-equiv="Content-Security-Policy" content="script-src 'self'"><meta http-equiv="Content-Security-Policy" content="object-src 'none'"><title>A definitive guide for compiling Lua from source code &mdash; Whoopee</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/css/styles.min.css"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"><link rel="canonical" href="https://www.whoop.ee/post/a-definitive-guide-for-compiling-lua-from-source-code.html"></head><body><header><a href="/" class="logo">Whoopee</a><nav class="mainmenu"><a href="/me/">About</a> <a href="/feed.xml">RSS</a></nav></header><main><a href="/"><em>&larr; Back to the index page</em></a><article><h1>A definitive guide for compiling Lua from source code</h1><time datetime="2024-07-11">July 11, 2024</time><p><input type="checkbox" class="toc-toggle" id="toc-toggle"> <label for="toc-toggle">Table of contents</label></p><div class="toc"><ul><li><a href="#a-definitive-guide-for-compiling-lua-from-source-code">A definitive guide for compiling Lua from source code</a><ul><li><a href="#prerequisites">Prerequisites</a><ul><li><a href="#download-the-source-code">Download the source code</a></li><li><a href="#compiler">Compiler</a><ul><li><a href="#linux">Linux</a></li><li><a href="#macos">MacOS</a></li><li><a href="#windows">Windows</a></li></ul></li></ul></li><li><a href="#compilation">Compilation</a><ul><li><a href="#building-lua">Building Lua</a></li></ul></li><li><a href="#testing-installation">Testing installation</a></li><li><a href="#getting-help">Getting help</a></li><li><a href="#advanced-compilation">Advanced compilation</a></li></ul></li></ul></div><p>Compiling Lua from the source code is an extremely easy procedure and every beginner in programming can do it, without any problems. I would introduce my guide on how to compile Lua from the source code.</p><h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2><ul><li>Source Code;</li><li>C compiler;</li><li>Make utility (optional, usually together installed with C compiler);</li><li><code>tar</code> command installed or any other archive manager which supports <code>.tar</code> format (optional).</li></ul><h3 id="download-the-source-code">Download the source code<a class="headerlink" href="#download-the-source-code" title="Permanent link">&para;</a></h3><p>Lua is a completely <a href="https://opensource.org/license/mit">free-to-use language (MIT license)</a> and its source code can be downloaded from <a href="https://www.lua.org/ftp/">the official website</a>. Let&rsquo;s assume that we use the latest version in this case it is <code>5.4.7</code>.</p><h3 id="compiler">Compiler<a class="headerlink" href="#compiler" title="Permanent link">&para;</a></h3><p>Lua is written in <a href="https://en.wikipedia.org/wiki/ANSI_C">ANSI C</a>, so we will need any C compiler that can compile ANSI C code. I prefer to use <a href="https://gcc.gnu.org/">https://gcc.gnu.org/</a>.</p><h4 id="linux">Linux<a class="headerlink" href="#linux" title="Permanent link">&para;</a></h4><p>For Debian-based GNU/Linux, you can install it with <code>apt</code> command:</p><div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>build-essential
</code></pre></div><p>For the GNU/Linux using a DNF package manager like Fedora:</p><div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>gcc
</code></pre></div><h4 id="macos">MacOS<a class="headerlink" href="#macos" title="Permanent link">&para;</a></h4><ul><li>On MacOS need to have <a href="https://brew.sh">brew package manage</a> then use the command:</li></ul><div class="codehilite"><pre><span></span><code>brew<span class="w"> </span>install<span class="w"> </span>gcc
</code></pre></div><ul><li>Also, XCode Command Line Tools is needed for MacOS.</li></ul><div class="codehilite"><pre><span></span><code>xcode-select<span class="w"> </span>--install
</code></pre></div><h4 id="windows">Windows<a class="headerlink" href="#windows" title="Permanent link">&para;</a></h4><p>For Windows, there might be different options: <a href="https://sourceforge.net/projects/mingw/">MinGW</a>, <a href="https://github.com/iovisor/bcc">BPF Compiler Collection (BCC)</a>, etc.</p><div class="admonition tip"><p class="admonition-title">Tip</p><p>Windows users probably should follow different procedures. Lua initially is designed to run on a Unix-like system, but the general logic should be very similar to Microsoft Windows.</p></div><h2 id="compilation">Compilation<a class="headerlink" href="#compilation" title="Permanent link">&para;</a></h2><p>After we download the <a href="https://www.lua.org/ftp/">source code</a>, follow the steps from a terminal:</p><ul><li>Go to the Download directory (let us assume that it is <code>~/Downloads/</code>).</li></ul><div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/Downloads/
</code></pre></div><ul><li>Extract contents for the archive <code>lua-5.4.7.tar.gz</code> with <code>tar</code> command or any other your archive manager:</li></ul><div class="codehilite"><pre><span></span><code>tar<span class="w"> </span>xvf<span class="w"> </span>lua-5.4.7.tar.gz
</code></pre></div><ul><li>A new directory <code>lua-5.4.7/</code> with Lua&rsquo;s source code is created.</li></ul><div class="codehilite"><pre><span></span><code>ls<span class="w"> </span>-l
&gt;<span class="w"> </span>doc/
&gt;<span class="w"> </span>src/
&gt;<span class="w"> </span>Makefile
&gt;<span class="w"> </span>README
</code></pre></div><h3 id="building-lua">Building Lua<a class="headerlink" href="#building-lua" title="Permanent link">&para;</a></h3><p>There is a command to detect your OS <code>make help</code> will print the supported operating systems.</p><div class="codehilite"><pre><span></span><code>make<span class="w"> </span><span class="nb">help</span>
&gt;<span class="w"> </span>guess<span class="w"> </span>aix<span class="w"> </span>bsd<span class="w"> </span>c89<span class="w"> </span>freebsd<span class="w"> </span>generic<span class="w"> </span>ios<span class="w"> </span>linux<span class="w"> </span>linux-readline<span class="w"> </span>macosx<span class="w"> </span>mingw<span class="w"> </span>posix<span class="w"> </span>solaris
</code></pre></div><p>Let&rsquo;s assume that we are on Linux and we have to use 4 threads for <code>make</code>.</p><div class="codehilite"><pre><span></span><code>make<span class="w"> </span>-j4<span class="w"> </span>linux
</code></pre></div><p>Once it is compiled it can be installed also with <code>make</code>:</p><div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>make<span class="w"> </span>install
</code></pre></div><p>By default (<code>INSTALL_TOP=/usr/local</code>) following files will be installed:</p><ul><li><code>lua, luac</code> -&gt; <code>/usr/local/bin</code></li><li><code>lua.h, luaconf.h, lualib.h, lauxlib.h, lua.hpp</code> -&gt; <code>/usr/local/include</code></li><li><code>liblua.a</code> -&gt; <code>/usr/local/lib</code></li><li><code>lua.1, luac.1</code> -&gt; <code>/usr/local/man/man1</code></li></ul><p>There is possible to change the path where Lua is installed, where <code>xxx</code> is the desired path in the file system.</p><div class="codehilite"><pre><span></span><code><span class="nv">INSTALL_TOP</span><span class="o">=</span>xxx<span class="w"> </span>make<span class="w"> </span>install
</code></pre></div><h2 id="testing-installation">Testing installation<a class="headerlink" href="#testing-installation" title="Permanent link">&para;</a></h2><p>Now Lua is available in your system:</p><div class="codehilite"><pre><span></span><code>lua -v
&gt; Lua 5.4.7  Copyright (C) 1994-2024 Lua.org, PUC-Rio
</code></pre></div><p>If you see similar output in the terminal then congratulations you have compiled and installed Lua from the source code successfully!</p><h2 id="getting-help">Getting help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2><p>In case you get stuck, then open the file in the downloaded source code directory <code>doc/readme.html</code>. This readme is a good starting point to get help.</p><h2 id="advanced-compilation">Advanced compilation<a class="headerlink" href="#advanced-compilation" title="Permanent link">&para;</a></h2><p>There is an option to set up Lua compilation with a variety of needs. For example, change the default buffer size or use only integers for numbers, change integer size to 32, 64-bits (with some tricks even 8 and 16 bits), float precision, memory limits, and lots more. Such a custom setup might be useful for microcontrollers and other <abbr title="Internet Of Things">IoT</abbr> microdevices.</p><p>There is a file <code>src/luaconf.h</code> where all such settings are set. The file is pretty large and there is no point to go here through it. I would recommend opening in your text editor and just going through and checking what potential options are there.</p><p>Modifying <code>src/luaconf.h</code> is a good practice to try different setups and help better understand does Lua works internally.</p><h2>Feedback</h2><p>For feedback, please check the <a href="/me/">contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</p></article><a href="/"><em>&larr; Back to the index page</em></a></main><footer><hr><p>&copy; 2022&mdash;2025 <a href="/me/">xdknight</a> Powered by <a href="https://github.com/hmngwy/jenny">Jenny</a> shell blog engine. <a href="https://github.com/dknight/whoopee">Source code</a></p><p>Any images on this website may be used, copied and redistributed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license.</p><p>Any code on this website may be used, copied and redistributed under the <a href="https://opensource.org/license/MIT">MIT</a> license.</p><p>This website <strong>does not</strong> use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</p></footer></body></html>