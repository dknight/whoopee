<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="StyLua is an amazing code formatter inspired by prettier. " name=description><meta content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal" name=keywords><meta content="Dmitri Smirnov" name=author><meta content=website property=og:type><meta content=https://www.whoop.ee/post/stylua-opinionated-code-formatter-for-lua.html property=og:url><meta content=https://www.whoop.ee/assets/img/whoopee-logo-black.png property=og:image><meta content="script-src 'self'" http-equiv=Content-Security-Policy><meta content="object-src 'none'" http-equiv=Content-Security-Policy><title>StyLua is an optimized code formatter for Lua — Whoopee</title><link as=font href=/assets/fonts/Perfect_DOS_VGA_437.woff2 rel=preload><link href=/favicon.ico rel=icon type=image/x-icon><link href=/assets/css/styles.min.css rel=stylesheet><link title="RSS Feed" href=/feed.xml rel=alternate type=application/rss+xml><link href=https://www.whoop.ee/post/stylua-opinionated-code-formatter-for-lua.html rel=canonical><body><header><a href=/><img alt=Whoopee class=logo height=172 src=/assets/img/whoopee-logo.png width=200></a><nav class=mainmenu><a class=mainmenu-toolbox href=/post/lua-toolbox.html>Lua Toolbox</a><a class=mainmenu-about href=/me/>About</a><a class=mainmenu-rss href=/feed.xml>RSS</a></nav></header><main><a href=/>← Back to the index page</a><article><h1>StyLua is an optimized code formatter for Lua</h1><time datetime=2025-04-25> April 25, 2025 </time><h2 id=update-2024-11-17>Update 2024-11-17<a title="Permanent link" class=headerlink href=#update-2024-11-17>#</a></h2><p>In stylua version 2.0 following changes:<ul><li>Config file <code>stylua.toml</code> has been renamed to <code>.stylua.toml</code> (prefixed with dot).</ul><h2 id=setup>Setup<a title="Permanent link" class=headerlink href=#setup>#</a></h2><p>I have discovered an amazing tool called StyLua for Lua’s code formatting. So you do not need to think about formatting anymore. It works like a <a href=https://prettier.io/>prettier</a> version of JavaScript or TypeScript, but for Lua.<p>It is extremely easy to set up. StyLua can be installed using Rust’s <a href=https://crates.io/crates/stylua>cargo</a> or <a href=https://www.npmjs.com/package/@johnnymorganz/stylua>npm</a>. It depends on the packaging tools you prefer; the commands are:<div class=codehilite><pre><span></span><code>cargo<span class=w> </span>install<span class=w> </span>stylua
</code></pre></div><p>or<div class=codehilite><pre><span></span><code>npm<span class=w> </span>i<span class=w> </span>-g<span class=w> </span>@johnnymorganz/stylua
</code></pre></div><h3 id=neovim>NeoVim<a title="Permanent link" class=headerlink href=#neovim>#</a></h3><p>In my init.lua for <a href=https://neovim.io/>neovim</a>, I just added plugin <a href=https://github.com/ckipp01/stylua-nvim>ckipp01/stylua-nvim</a> and<div class=codehilite><pre><span></span><code><span class=s2>"ckipp01/stylua-nvim"</span>
</code></pre></div><p>And <code>BufWritePre</code> hook to format on auto-save.<div class=codehilite><pre><span></span><code><span class=n>vim</span><span class=p>.</span><span class=n>api</span><span class=p>.</span><span class=n>nvim_create_autocmd</span><span class=p>({</span> <span class=s2>"BufWritePost"</span> <span class=p>},</span> <span class=p>{</span>
    <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>"*.lua"</span> <span class=p>},</span>
    <span class=n>callback</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
      <span class=c1>-- more commands if needed</span>
        <span class=n>vim</span><span class=p>.</span><span class=n>cmd</span><span class=p>(</span><span class=s>[[silent! !stylua %]]</span><span class=p>)</span>
    <span class=kr>end</span>
<span class=p>})</span>
</code></pre></div><p>My complete init.lua, which is constantly updated, can be checked on <a href=(https://github.com/dknight/dotfiles/blob/main/init.lua)>GitHub</a>.<h3 id=vscode>VSCode<a title="Permanent link" class=headerlink href=#vscode>#</a></h3><p>For VSCode, installation is even easier; StyLua extension is available on the <a href="https://marketplace.visualstudio.com/items?itemName=JohnnyMorganz.stylua">marketplace</a>. Just one click and install.<h2 id=configuration>Configuration<a title="Permanent link" class=headerlink href=#configuration>#</a></h2><p>Currently, I am happy with the default settings, except for line width. I prefer 80 or even 78-column width. Let’s fix that. <a href="https://github.com/JohnnyMorganz/StyLua?tab=readme-ov-file#options">Several options</a> can be adjusted. Let’s <code>stylua.toml</code> somewhere on the system with the contents:<div class=codehilite><pre><span></span><code><span class=n>column_width</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>78</span>
</code></pre></div><p>Now we have 2 options:<h3 id=set-a-flag-config-path-in-the-stylua-command>Set a flag <code>--config-path</code> in the <code>stylua</code> command<a title="Permanent link" class=headerlink href=#set-a-flag-config-path-in-the-stylua-command>#</a></h3><div class=codehilite><pre><span></span><code><span class=n>vim</span><span class=p>.</span><span class=n>api</span><span class=p>.</span><span class=n>nvim_create_autocmd</span><span class=p>({</span> <span class=s2>"BufWritePost"</span> <span class=p>},</span> <span class=p>{</span>
    <span class=n>pattern</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>"*.lua"</span> <span class=p>},</span>
    <span class=n>callback</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
        <span class=n>vim</span><span class=p>.</span><span class=n>cmd</span><span class=p>(</span><span class=s>[[silent! !stylua --config-path={path-to-stylua.toml} %]]</span><span class=p>)</span>
    <span class=kr>end</span>
<span class=p>})</span>
</code></pre></div><h3 id=set-in-plugins-options>Set in plugins options<a title="Permanent link" class=headerlink href=#set-in-plugins-options>#</a></h3><p>Consider we use <a href=https://github.com/folke/lazy.nvim>lazy</a> for NeoVim.<div class=codehilite><pre><span></span><code><span class=p>{</span>
    <span class=s2>"ckipp01/stylua-nvim"</span><span class=p>,</span>
    <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
        <span class=nb>require</span><span class=p>(</span><span class=s2>"stylua-nvim"</span><span class=p>).</span><span class=n>setup</span><span class=p>({</span>
            <span class=n>config_file</span> <span class=o>=</span> <span class=n>stylua_cfg</span><span class=p>,</span>
        <span class=p>})</span>
    <span class=kr>end</span><span class=p>,</span>
    <span class=p>},</span>
</code></pre></div><p>For VSCode it should everything much easier, all configurations should be available in the extension settings.<h2 id=conclusion>Conclusion<a title="Permanent link" class=headerlink href=#conclusion>#</a></h2><p>There is no need to think about code style while coding in Lua and concentrate on the tasks; the formatter does its job. For more detailed editors’ integration guides Check out <a href=https://github.com/JohnnyMorganz/StyLua>the official GitHub repo of StyLua</a>.<h2 id=references>References<a title="Permanent link" class=headerlink href=#references>#</a></h2><ul><li><a href=https://github.com/JohnnyMorganz/StyLua>Github: StyLua</a><li><a href=https://roblox.github.io/lua-style-guide/>Roblox Lua Style Guide</a></ul><h2>Feedback</h2><p>For feedback, please check the <a href=/me/>contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</article><a href=/>← Back to the index page</a></main><footer><hr><p>(c) 2022-2025 <a href=/me/>xdknight</a> Powered by <a href=https://github.com/hmngwy/jenny>Jenny</a> shell blog engine.<p>Any images on this website may be used, copied and redistributed under the <a href=https://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a> license.<p>Any code on this website may be used, copied and redistributed under the <a href=https://opensource.org/license/MIT>MIT</a> license.<p>This website does not use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</footer>