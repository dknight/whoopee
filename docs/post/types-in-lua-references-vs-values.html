<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Explanation of what means 'pass by value' and 'pass by reference' in Lua language. Difference between simple values and reference types. "><meta name="keywords" content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal"><meta name="author" content="Dmitri Smirnov"><meta property="og:type" content="website"><meta property="og:url" content="https://www.whoop.ee/post/types-in-lua-references-vs-values.html"><meta property="og:image" content="https://www.whoop.ee/assets/img/lua-language.gif"><meta http-equiv="Content-Security-Policy" content="script-src 'self'"><meta http-equiv="Content-Security-Policy" content="object-src 'none'"><title>Types in Lua: References vs Values &mdash; Whoopee</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/css/styles.min.css"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"><link rel="canonical" href="https://www.whoop.ee/post/types-in-lua-references-vs-values.html"></head><body><header><a href="/" class="logo">Whoopee</a><nav class="mainmenu"><a href="/me/">About</a> <a href="/feed.xml">RSS</a></nav></header><main><a href="/"><em>&larr; Back to the index page</em></a><article><h1>Types in Lua: References vs Values</h1><time datetime="2024-05-09">May 09, 2024</time><p><input type="checkbox" class="toc-toggle" id="toc-toggle"> <label for="toc-toggle">Table of contents</label></p><div class="toc"><ul><li><a href="#types-in-lua-references-vs-values">Types in Lua: References vs Values</a><ul><li><a href="#lua-is-a-dynamically-typed-language">Lua is a dynamically typed language</a></li><li><a href="#types-in-lua">Types in Lua</a></li><li><a href="#pass-by-value">Pass by value</a></li><li><a href="#pass-by-reference">Pass by reference</a></li><li><a href="#table-to-memoize">Table to memoize</a></li><li><a href="#conclusion">Conclusion</a></li><li><a href="#references">References</a></li></ul></li></ul></div><p>Sometimes it is confusing for beginners to understand how the argument is passed to a function. Usually, there are the phrases &ldquo;<em>passed by reference</em>&rdquo; and &ldquo;<em>passed by value</em>&rdquo; without a concrete explanation. It is my attempt to explain the topic in very simple terms.</p><h2 id="lua-is-a-dynamically-typed-language">Lua is a dynamically typed language<a class="headerlink" href="#lua-is-a-dynamically-typed-language" title="Permanent link">&para;</a></h2><p>First of all, Lua is a dynamically typed language. This means that variables do not have types; <strong>only values do</strong>. All values in Lua are first-class citizens, which means that all values can be stored in variables and passed to functions as arguments.</p><h2 id="types-in-lua">Types in Lua<a class="headerlink" href="#types-in-lua" title="Permanent link">&para;</a></h2><p>There are eight (8) basic types in Lua: <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, <code>table</code>, <code>function</code>, <code>userdata</code> and <code>thread</code>.</p><p>Values with types: <code>table</code>, <code>function</code>, <code>userdata</code> and <code>thread</code> are objects, these do not contain values, but only the <strong>reference (location, address) in the computer&rsquo;s memory</strong>. The variables with these four (4) types are passed by reference.</p><p>Consider:</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="p">{</span> <span class="n">hello</span> <span class="o">=</span> <span class="s2">&quot;world&quot;</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c1">--&gt; table: 0x55d95d5136f0</span>
</code></pre></div><p><code>0x55d95d5136f0</code> is the address in the memory.</p><p>Correspondingly values with type: <code>nil</code>, <code>boolean</code>, <code>number</code> and <code>string</code> are passed <strong>by value</strong></p><h2 id="pass-by-value">Pass by value<a class="headerlink" href="#pass-by-value" title="Permanent link">&para;</a></h2><p>Values with type: <code>nil</code>, <code>boolean</code>, <code>number</code> and <code>string</code> are passed <strong>by value</strong>.</p><p>Consider:</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1">-- number</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="kr">return</span> <span class="n">x</span>
<span class="kr">end</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1">-- 10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">double</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="c1">-- 20</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1">-- 10 (not changed)</span>
</code></pre></div><p>When we pass by value, the initial value of <code>x</code> has not changed (not mutated), the value is just copied into the argument.</p><h2 id="pass-by-reference">Pass by reference<a class="headerlink" href="#pass-by-reference" title="Permanent link">&para;</a></h2><p>We know that values with types: <code>table</code>, <code>function</code>, <code>userdata</code> and <code>thread</code> are passed by reference because these do not contain values only the addresses in the memory.</p><p>Consider:</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">addToTable</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
    <span class="n">t</span><span class="p">[</span><span class="o">#</span><span class="n">t</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<span class="kr">end</span>

<span class="c1">-- initially empty table</span>
<span class="nb">print</span><span class="p">(</span><span class="o">#</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="o">#</span><span class="n">t</span><span class="p">])</span> <span class="c1">--&gt; 0  nil</span>

<span class="c1">-- pass table as the first argument</span>
<span class="n">addToTable</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;some value&quot;</span><span class="p">)</span>

<span class="c1">-- here the initial t is changed (mutated)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">#</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="o">#</span><span class="n">t</span><span class="p">])</span> <span class="c1">--&gt; 1  &quot;some value&quot;</span>
</code></pre></div><p>The reference type <code>table</code> holds the address in memory. After the change, <strong>the address in memory stays unchanged, but the content in memory is changed (mutated)</strong>.</p><h2 id="table-to-memoize">Table to memoize<a class="headerlink" href="#table-to-memoize" title="Permanent link">&para;</a></h2><table><thead><tr><th style="text-align: left;">Value</th><th style="text-align: left;">Reference</th></tr></thead><tbody><tr><td style="text-align: left;">nil</td><td style="text-align: left;">table</td></tr><tr><td style="text-align: left;">boolean</td><td style="text-align: left;">function</td></tr><tr><td style="text-align: left;">string</td><td style="text-align: left;">thread</td></tr><tr><td style="text-align: left;">number</td><td style="text-align: left;">userdata</td></tr></tbody></table><h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2><p>For a better understanding of this topic it is strongly recommended (maybe read even several times) <a href="https://www.lua.org/manual/5.4/manual.html#2.1">the corresponding topic in Lua manual</a>.</p><h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2><ul><li><a href="https://www.lua.org/manual/5.4/manual.html#2.1">Lua manual: Values and Types</a></li></ul><h2>Feedback</h2><p>For feedback, please check the <a href="/me/">contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</p></article><a href="/"><em>&larr; Back to the index page</em></a></main><footer><hr><p>&copy; 2022&mdash;2025 <a href="/me/">xdknight</a> Powered by <a href="https://github.com/hmngwy/jenny">Jenny</a> shell blog engine. <a href="https://github.com/dknight/whoopee">Source code</a></p><p>Any images on this website may be used, copied and redistributed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license.</p><p>Any code on this website may be used, copied and redistributed under the <a href="https://opensource.org/license/MIT">MIT</a> license.</p><p>This website <strong>does not</strong> use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of <abbr title="Tool of evil">JavaScript</abbr>.</p></footer></body></html>