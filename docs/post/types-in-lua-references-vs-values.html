<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Explanation of what means 'pass by value' and 'pass by reference' in Lua language. Difference between simple values and reference types. " name=description><meta content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal" name=keywords><meta content="Dmitri Smirnov" name=author><meta content=website property=og:type><meta content=https://www.whoop.ee/post/types-in-lua-references-vs-values.html property=og:url><meta content=https://www.whoop.ee/assets/img/whoopee-logo.png property=og:image><meta content="script-src 'self'" http-equiv=Content-Security-Policy><meta content="object-src 'none'" http-equiv=Content-Security-Policy><title>Types in Lua: References vs Values — Whoopee</title><link as=font href=/assets/fonts/Perfect_DOS_VGA_437.woff2 rel=preload><link href=/favicon.ico rel=icon type=image/x-icon><link href=/assets/css/styles.min.css rel=stylesheet><link title="RSS Feed" href=/feed.xml rel=alternate type=application/rss+xml><link href=https://www.whoop.ee/post/types-in-lua-references-vs-values.html rel=canonical><body><header><a href=/><img alt=Whoopee class=logo height=172 src=/assets/img/whoopee-logo.png width=200></a><nav class=mainmenu><a href=/me/>About</a><a href=/feed.xml>RSS</a></nav></header><main><a href=/>← Back to the index page</a><article><h1>Types in Lua: References vs Values</h1><time datetime=2024-05-09> May 09, 2024 </time><div><input class=toc-toggle id=toc-toggle type=checkbox><label for=toc-toggle>Table of contents</label></div><div class=toc><ul><li><a href=#types-in-lua-references-vs-values>Types in Lua: References vs Values</a><ul><li><a href=#lua-is-a-dynamically-typed-language>Lua is a dynamically typed language</a><li><a href=#types-in-lua>Types in Lua</a><li><a href=#pass-by-value>Pass by value</a><li><a href=#pass-by-reference>Pass by reference</a><li><a href=#table-to-memoize>Table to memoize</a><li><a href=#conclusion>Conclusion</a><li><a href=#references>References</a></ul></ul></div><p>Sometimes it is confusing for beginners to understand how the argument is passed to a function. Usually, there are the phrases “<em>passed by reference</em>” and “<em>passed by value</em>” without a concrete explanation. It is my attempt to explain the topic in very simple terms.<h2 id=lua-is-a-dynamically-typed-language>Lua is a dynamically typed language<a title="Permanent link" class=headerlink href=#lua-is-a-dynamically-typed-language>#</a></h2><p>First of all, Lua is a dynamically typed language. This means that variables do not have types; <strong>only values do</strong>. All values in Lua are first-class citizens, which means that all values can be stored in variables and passed to functions as arguments.<h2 id=types-in-lua>Types in Lua<a title="Permanent link" class=headerlink href=#types-in-lua>#</a></h2><p>There are eight (8) basic types in Lua: <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, <code>table</code>, <code>function</code>, <code>userdata</code> and <code>thread</code>.<p>Values with types: <code>table</code>, <code>function</code>, <code>userdata</code> and <code>thread</code> are objects, these do not contain values, but only the <strong>reference (location, address) in the computer’s memory</strong>. The variables with these four (4) types are passed by reference.<p>Consider:<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{</span> <span class=n>hello</span> <span class=o>=</span> <span class=s2>"world"</span> <span class=p>}</span>
<span class=nb>print</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=c1>--> table: 0x55d95d5136f0</span>
</code></pre></div><p><code>0x55d95d5136f0</code> is the address in the memory.<p>Correspondingly values with type: <code>nil</code>, <code>boolean</code>, <code>number</code> and <code>string</code> are passed <strong>by value</strong><h2 id=pass-by-value>Pass by value<a title="Permanent link" class=headerlink href=#pass-by-value>#</a></h2><p>Values with type: <code>nil</code>, <code>boolean</code>, <code>number</code> and <code>string</code> are passed <strong>by value</strong>.<p>Consider:<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>10</span> <span class=c1>-- number</span>

<span class=kd>local</span> <span class=kr>function</span> <span class=nf>double</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
    <span class=n>x</span> <span class=o>=</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
    <span class=kr>return</span> <span class=n>x</span>
<span class=kr>end</span>

<span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=c1>-- 10</span>
<span class=nb>print</span><span class=p>(</span><span class=n>double</span><span class=p>(</span><span class=n>x</span><span class=p>))</span> <span class=c1>-- 20</span>
<span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=c1>-- 10 (not changed)</span>
</code></pre></div><p>When we pass by value, the initial value of <code>x</code> has not changed (not mutated), the value is just copied into the argument.<h2 id=pass-by-reference>Pass by reference<a title="Permanent link" class=headerlink href=#pass-by-reference>#</a></h2><p>We know that values with types: <code>table</code>, <code>function</code>, <code>userdata</code> and <code>thread</code> are passed by reference because these do not contain values only the addresses in the memory.<p>Consider:<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{}</span>

<span class=kd>local</span> <span class=kr>function</span> <span class=nf>addToTable</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span>
    <span class=n>t</span><span class=p>[</span><span class=o>#</span><span class=n>t</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>v</span>
<span class=kr>end</span>

<span class=c1>-- initially empty table</span>
<span class=nb>print</span><span class=p>(</span><span class=o>#</span><span class=n>t</span><span class=p>,</span> <span class=n>t</span><span class=p>[</span><span class=o>#</span><span class=n>t</span><span class=p>])</span> <span class=c1>--> 0  nil</span>

<span class=c1>-- pass table as the first argument</span>
<span class=n>addToTable</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=s2>"some value"</span><span class=p>)</span>

<span class=c1>-- here the initial t is changed (mutated)</span>
<span class=nb>print</span><span class=p>(</span><span class=o>#</span><span class=n>t</span><span class=p>,</span> <span class=n>t</span><span class=p>[</span><span class=o>#</span><span class=n>t</span><span class=p>])</span> <span class=c1>--> 1  "some value"</span>
</code></pre></div><p>The reference type <code>table</code> holds the address in memory. After the change, <strong>the address in memory stays unchanged, but the content in memory is changed (mutated)</strong>.<h2 id=table-to-memoize>Table to memoize<a title="Permanent link" class=headerlink href=#table-to-memoize>#</a></h2><table><thead><tr><th style="text-align: left;">Value<th style="text-align: left;">Reference<tbody><tr><td style="text-align: left;">nil<td style="text-align: left;">table<tr><td style="text-align: left;">boolean<td style="text-align: left;">function<tr><td style="text-align: left;">string<td style="text-align: left;">thread<tr><td style="text-align: left;">number<td style="text-align: left;">userdata</table><h2 id=conclusion>Conclusion<a title="Permanent link" class=headerlink href=#conclusion>#</a></h2><p>For a better understanding of this topic it is strongly recommended (maybe read even several times) <a href=https://www.lua.org/manual/5.4/manual.html#2.1>the corresponding topic in Lua manual</a>.<h2 id=references>References<a title="Permanent link" class=headerlink href=#references>#</a></h2><ul><li><a href=https://www.lua.org/manual/5.4/manual.html#2.1>Lua manual: Values and Types</a></ul><h2>Feedback</h2><p>For feedback, please check the <a href=/me/>contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</article><a href=/>← Back to the index page</a></main><footer><hr><p>(c) 2022-2025 <a href=/me/>xdknight</a> Powered by <a href=https://github.com/hmngwy/jenny>Jenny</a> shell blog engine.<p>Any images on this website may be used, copied and redistributed under the <a href=https://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a> license.<p>Any code on this website may be used, copied and redistributed under the <a href=https://opensource.org/license/MIT>MIT</a> license.<p>This website does not use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</footer>