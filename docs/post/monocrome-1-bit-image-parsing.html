<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Sime guide about 1-bit monochrome images: how to parse meta data from 1-bit bitmap files. Creating monochrome images with ImageMagick, GIMP, MS Paint, and other image processing software. "><meta name="keywords" content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal"><meta name="author" content="Dmitri Smirnov"><meta property="og:type" content="website"><meta property="og:url" content="https://www.whoop.ee/post/monocrome-1-bit-image-parsing.html"><meta property="og:image" content="https://www.whoop.ee/assets/img/lua-language.gif"><meta http-equiv="Content-Security-Policy" content="script-src 'self'"><meta http-equiv="Content-Security-Policy" content="object-src 'none'"><title>Monochrome 1-bit image parsing &mdash; Whoopee</title><link rel="preload" href="/assets/fonts/Perfect_DOS_VGA_437.woff2" as="font"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/css/styles.min.css"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"><link rel="canonical" href="https://www.whoop.ee/post/monocrome-1-bit-image-parsing.html"></head><body><header><a href="/" class="logo">Whoopee</a><nav class="mainmenu"><a href="/me/">About</a> <a href="/feed.xml">RSS</a></nav></header><main><a href="/"><em>&larr; Back to the index page</em></a><article><h1>Monochrome 1-bit image parsing</h1><time datetime="2024-11-11">November 11, 2024</time><p>When I tried to use <a href="https://www.arduino.cc/">Arduino</a> to make a simple game for TV <a href="https://github.com/dknight/sayzo">Sayzo</a>. There was need to parse 1-bit data from bitmap (*.bmp) image to bytes for input to C.</p><p>I haven&rsquo;t found anything suitable on the web that time (2014?). I made decision to write my own utility, which recently I have upgraded code of it.</p><h2 id="bmp-format">BMP format<a class="headerlink" href="#bmp-format" title="Permanent link">#</a></h2><p>Actually, the BMP format is very simple; it consists of 2 parts: a header with metadata and actual bytes without any compression.</p><h3 id="header">Header<a class="headerlink" href="#header" title="Permanent link">#</a></h3><table><thead><tr><th>Bytes</th><th>Value/Type</th><th></th></tr></thead><tbody><tr><td>2 bytes</td><td>0x4D42</td><td>BMP format identifier</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>File size in bytes</td></tr><tr><td>2 bytes</td><td>int16_t</td><td>not in use/reserved</td></tr><tr><td>2 bytes</td><td>int16_t</td><td>not in use/reserved</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>Offset to image data in bytes from beginning of file</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>DIB Header size in bytes</td></tr><tr><td>4 bytes</td><td>int32_t</td><td>Width of the image</td></tr><tr><td>4 bytes</td><td>int32_t</td><td>Height of the image</td></tr><tr><td>2 bytes</td><td>uint16_t</td><td>Number of color planes</td></tr><tr><td>2 bytes</td><td>uint16_t</td><td>Bits per pixel</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>Compression type</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>Image size in bytes</td></tr><tr><td>4 bytes</td><td>int32_t</td><td>Pixels per meter (X)</td></tr><tr><td>4 bytes</td><td>int32_t</td><td>Pixels per meter (Y)</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>Number of colors</td></tr><tr><td>4 bytes</td><td>uint32_t</td><td>Important colors</td></tr></tbody></table><h3 id="data">Data<a class="headerlink" href="#data" title="Permanent link">#</a></h3><p>After the header data, follow plain data in bytes as <code>unit8_t</code> or <code>unsigned char</code>. This makes parsing extremely easy.</p><p>Check <a href="https://github.com/dknight/bmp2bytes/">bmp2bytes</a> to parse the 1-bit images and get image data and header.</p><h2 id="example">Example<a class="headerlink" href="#example" title="Permanent link">#</a></h2><p><img alt="Girl 1-bit" src="/assets/img/girl.bmp"></p><div class="codehilite"><pre><span></span><code>bmp2bytes<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;0x%x&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span>-n<span class="w"> </span>./tests/girl.bmp
</code></pre></div><details><summary>Example of output</summary><pre class="break">0xff,0xfe,0x0,0x0,0x5f,0xff,0xff,0x6a,0x80,0x0,0x0,0x7f,0xfa,0xaa,0xad,0xdd,0xfd,0x0,0x0,0x35,0xbb,0xb5,0xb5,0x0,0x0,0x0,0x7f,0x7f,0x55,0x55,0xff,0xef,0x0,0x0,0x3f,0xdd,0xff,0x5a,0x60,0x0,0x0,0x3b,0xea,0xd6,0xd6,0x7f,0x7e,0x0,0x0,0x55,0xff,0xad,0xef,0x80,0x0,0x0,0x3f,0xfd,0x52,0x5b,0xdb,0xfd,0x0,0x0,0x7e,0xdd,0xf6,0xb2,0xe0,0x0,0x0,0x3b,0xfe,0xbb,0x4d,0xff,0xee,0x0,0x0,0xb7,0xff,0xbf,0xdf,0x10,0x0,0x0,0x7e,0xdd,0x4d,0xb6,0xef,0xfc,0x0,0x0,0x5f,0x6d,0xfd,0x74,0xe0,0x0,0x0,0x2f,0xf7,0xb4,0xa9,0xfd,0xfc,0x0,0x0,0xf7,0xff,0xdf,0xde,0x90,0x0,0x0,0x3f,0xfa,0xa6,0x6d,0xff,0xfc,0x0,0x0,0xbf,0xfd,0xf7,0xf7,0x50,0x0,0x0,0x37,0xbf,0x57,0x56,0xfe,0xdc,0x0,0x1,0x7e,0xef,0xfd,0x5d,0xc0,0x0,0x0,0x3e,0xfa,0xb2,0xb6,0xdf,0xfc,0x0,0x0,0xf1,0xbf,0xaf,0xff,0x58,0x0,0x0,0x3f,0xed,0x4d,0x4d,0xef,0xf4,0x0,0x1,0x0,0x15,0xfb,0xb5,0x40,0x0,0x0,0x16,0xfd,0xd5,0xb5,0xff,0xf8,0x0,0x0,0xfa,0x1,0x7d,0xdf,0xf8,0x0,0x0,0x7f,0xde,0x4a,0x96,0xfb,0xf8,0x0,0x1,0x7f,0x80,0x6f,0xfa,0xa0,0x0,0x0,0x36,0xfb,0x75,0x6b,0xff,0xb8,0x0,0x0,0xd4,0x68,0x1a,0x6f,0x0,0x0,0x0,0x3f,0x6a,0x8a,0xdc,0x7d,0xf8,0x0,0x0,0x40,0x3,0x2f,0xb0,0x0,0x0,0x0,0x17,0xfa,0xea,0x47,0xdf,0xf8,0x0,0x4,0x40,0x1,0xf7,0xb0,0x0,0x0,0x0,0x7a,0xdd,0x2a,0xb2,0xff,0xd0,0x0,0x1,0x0,0x0,0x5a,0xc8,0xa,0x0,0x0,0xf,0xb6,0xd5,0x5b,0xf7,0x70,0x0,0xc,0x0,0x8,0x2f,0xa8,0x1,0x0,0x0,0x26,0xf9,0x2a,0xa4,0xbf,0xf0,0x0,0x3,0x50,0x0,0x5a,0xa0,0x0,0x0,0x0,0x33,0xde,0x4d,0xb7,0xfb,0xd0,0x0,0x9,0x11,0x0,0x2f,0x80,0x0,0x0,0x0,0x39,0x75,0x64,0xb2,0xff,0x60,0x0,0x2,0xce,0xea,0x9e,0x40,0x10,0x0,0x0,0x15,0xfb,0x16,0xcd,0xaf,0xe0,0x0,0x9,0x6d,0x39,0x6b,0x40,0x0,0x0,0x0,0x1d,0x55,0x69,0x36,0xfb,0xe0,0x2,0x6,0xb7,0xed,0x5f,0xa8,0x0,0x0,0x0,0x15,0x5e,0x96,0x93,0xff,0xe0,0x1,0x1,0x52,0xaa,0xf6,0x85,0x40,0x0,0x0,0xf,0xea,0x92,0xd9,0xdd,0xe0,0x0,0x1a,0xdd,0xf5,0x5f,0x6a,0xa8,0x0,0x0,0x4,0xad,0x69,0x25,0xff,0xa0,0x0,0x1,0x6a,0xaf,0xee,0x91,0x50,0x0,0x0,0x3,0xfa,0x96,0xd6,0xef,0xf0,0x0,0x5,0xaf,0xf7,0x77,0x5b,0x58,0x0,0x0,0x8,0xae,0x52,0x55,0xff,0xe0,0x0,0x0,0xaa,0xbb,0xdd,0x29,0xaa,0x0,0x0,0x4,0xd3,0x5a,0xaa,0xfb,0x70,0x0,0x1,0xa7,0x75,0x77,0x9e,0xd4,0x0,0x0,0x6,0x7c,0x85,0x55,0xdf,0xf0,0x0,0x0,0x59,0xde,0xde,0xa5,0x68,0x0,0x0,0x1,0x8b,0x5a,0xab,0xf7,0xb8,0x0,0x9,0x4d,0xeb,0x7f,0x9b,0x2a,0x0,0x0,0x0,0x69,0x4a,0xa8,0xfb,0xf0,0x0,0x4,0x65,0x6a,0xba,0xcd,0xe8,0x0,0x0,0x1,0x6c,0xaa,0xaf,0xbf,0xf8,0x0,0x2,0x92,0xb5,0xdf,0xa6,0xa8,0x0,0x0,0x0,0xb2,0x49,0x50,0xff,0xb8,0x0,0x1,0x39,0xd9,0x6f,0xad,0xd4,0x0,0x0,0x0,0x4d,0x2a,0xa7,0xf7,0xe8,0x0,0x2,0x8c,0x6d,0xa2,0xaa,0x50,0x0,0x0,0x0,0x32,0x8a,0xb2,0xff,0xf8,0x0,0x2,0xb2,0x54,0xa,0x97,0xa8,0x0,0x0,0x0,0x1d,0x65,0x9a,0xf5,0x78,0x0,0x1,0x1d,0x2a,0xa,0x29,0x50,0x0,0x0,0x0,0x2a,0x94,0x65,0xbf,0xdc,0x0,0x12,0xab,0xd5,0x74,0x16,0xa4,0x0,0x0,0x0,0x8,0xa9,0xaa,0xff,0xfc,0x0,0x1,0xaa,0x5a,0x93,0x4a,0xa0,0x0,0x0,0x0,0x6,0x26,0x95,0xff,0xd8,0x0,0x10,0xbf,0x6a,0x98,0x6b,0x20,0x0,0x0,0x0,0x1,0x10,0xc5,0xad,0xfc,0x0,0x1,0xc9,0xb7,0x67,0x24,0x90,0x0,0x0,0x0,0xa,0xca,0x34,0xff,0x7e,0x0,0x0,0x66,0x58,0x95,0x5a,0xd0,0x0,0x0,0x0,0x3,0x2a,0xc9,0xff,0xbe,0x0,0x10,0x73,0x48,0x0,0x4b,0x0,0x0,0x0,0x0,0x1,0xa2,0x4a,0xb7,0xde,0x0,0x10,0x35,0x80,0x1,0x29,0xd0,0x0,0x0,0x0,0x1,0x51,0x49,0xff,0xed,0x0,0x18,0x5a,0x0,0x0,0x4,0x20,0x0,0x0,0x0,0x1,0x5c,0x24,0xfd,0xff,0x0,0xc,0x2d,0x60,0x0,0xb,0x80,0x0,0x0,0x0,0x0,0xa1,0x55,0xde,0xf7,0x0,0xc,0x16,0xb4,0x80,0x0,0x80,0x0,0x0,0x0,0x0,0x54,0x82,0xff,0x7d,0x0,0xe,0xa,0x92,0xa4,0x1a,0x80,0x0,0x0,0x0,0x0,0x52,0x51,0xeb,0xdf,0x80,0xb,0x5,0x68,0x10,0x22,0x0,0x0,0x0,0x0,0x0,0x9,0x2c,0xff,0x77,0x0,0x16,0x85,0xb5,0x44,0x8c,0x0,0x0,0x0,0x0,0x0,0x6,0x42,0x7f,0xfb,0x80,0xb,0xc0,0xdd,0x42,0x62,0x0,0x0,0x0,0x0,0x0,0x1,0x22,0xfb,0xfe,0x0,0x1a,0xa2,0x55,0x6b,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x11,0xaf,0x6b,0x0,0x16,0xf0,0xaf,0xb4,0xa0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0xfd,0xf4,0x0,0x4d,0xd8,0x29,0x4d,0x40,0x0,0x0,0x0,0x0,0x0,0x1,0x40,0xef,0x50,0x3,0x2b,0x6c,0x25,0x65,0x40,0x0,0x0,0x0,0x0,0x1,0x10,0x30,0xf5,0x0,0x1,0x2d,0x77,0x15,0x34,0x0,0x0,0x0,0x0,0x0,0x0,0x88,0xa,0xbc,0x0,0x1,0x57,0xad,0x82,0xca,0x0,0x0,0x0,0x0,0x0,0x1,0xa6,0x9,0x6a,0x0,0x0,0x9a,0xf6,0xa0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x50,0x82,0xad,0x80,0x0,0x5f,0x5a,0xd8,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x16,0x52,0xf4,0x80,0x0,0x2b,0x6e,0xea,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x52,0xba,0xd8,0xc0,0x0,0x17,0xfb,0x2d,0xa0,0x0,0x0,0x0,0x0,0x0,0x0,0x98,0xdd,0xf9,0x60,0x0,0x1e,0x95,0xd5,0x50,0x0,0x0,0x0,0x0,0x0,0x0,0x66,0x67,0xfd,0xe0,0x0,0xb,0xfd,0x75,0xd0,0x0,0x0,0x0,0x0,0x0,0x0,0x1b,0x3d,0xff,0xe0,0x0,0x2d,0xaf,0x5a,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x69,0x4d,0xf9,0xa0,0x0,0xf,0x7b,0xef,0xa0,0x0,0x0,0x0,0x0,0x0,0x0,0x15,0x36,0xfd,0xf0,0x0,0x5,0xf6,0xa9,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x2a,0x95,0xfd,0xd0,0x0,0x2,0xda,0xee,0xa0,0x0,0x0,0x0,0x0,0x0,0x0,0x14,0x8a,0xfe,0xf0,0x0,0x1,0x7d,0x76,0x80,0x0,0x0,0x0,0x0,0x0,0x0,0xa,0x4b,0xfe,0xd0,0x0,0x1,0x56,0xab,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x28,0xfc,0xe8,0x0,0x0,0xb9,0x6e,0x80,0x0,0x0,0x0,0x0,0x0,0x0,0x2,0xcb,0xfe,0x78,0x0,0x0,0xd,0x32,0x80,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x64,0xff,0x78,0x0,0x0,0x2a,0xae,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x35,0xff,0x30,0x0,0x0,0x1,0x59,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x40,0x4a,0xff,0xb8,0x0,0x0,0x14,0xa6,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x11,0xff,0xdc,0x0,0x0,0x2,0x29,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x40,0x8c,0xff,0xdc,0x0,0x0,0x1,0x14,0x80,0x0,0x0,0x0,0x0,0x0,0x0,0x10,0x2,0xff,0x9a,0x0,0x0,0x0,0x8a,0x0,0x0,0x40,0x0,0x0,0x0,0x0,0x0,0x48,0xff,0xc6,0x0,0x0,0x2,0x28,0x0,0x0,0x80,0x0,0x0,0x0,0x0,0x10,0x2,0xff,0xf1,0x0,0x0,0x0,0x6,0x80,0x0,0xc0,0x0,0x0,0x0,0x0,0x0,0x0
</pre></details><h2 id="creating-1-bit-bitmaps">Creating 1-bit bitmaps<a class="headerlink" href="#creating-1-bit-bitmaps" title="Permanent link">#</a></h2><h3 id="gimp">GIMP<a class="headerlink" href="#gimp" title="Permanent link">#</a></h3><ol><li><em>Toolbar &gt; Image &gt; Mode &gt; Index</em></li><li><em>File &gt; Export as&hellip;</em></li><li>Save file with extension bmp.</li></ol><h3 id="imagemagick">ImageMagick<a class="headerlink" href="#imagemagick" title="Permanent link">#</a></h3><p><a href="https://imagemagick.org/">ImageMagick</a> has an enormous amount of image processing features. It can covert any file to a 1-bit bitmap with a single command:</p><p>ImageMagick &lt;7</p><div class="codehilite"><pre><span></span><code>magick<span class="w"> </span>convert<span class="w"> </span>-monochrome<span class="w"> </span>image.png<span class="w"> </span>1bit.bmp
</code></pre></div><p>ImageMagick 7+</p><div class="codehilite"><pre><span></span><code>magick<span class="w"> </span>image.png<span class="w"> </span>-monochrome<span class="w"> </span>1bit.bmp
</code></pre></div><h3 id="ms-paint-and-lots-of-other-image-editors">MS Paint and lots of other image editors<a class="headerlink" href="#ms-paint-and-lots-of-other-image-editors" title="Permanent link">#</a></h3><p>Process of creating monochrome images in the most of the image editors is the same. Just set the image to an indexed palette with 2 colors black and white and save.</p><h2>Feedback</h2><p>For feedback, please check the <a href="/me/">contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</p></article><a href="/"><em>&larr; Back to the index page</em></a></main><footer><hr><p>&copy; 2022&mdash;2025 <a href="/me/">xdknight</a> Powered by <a href="https://github.com/hmngwy/jenny">Jenny</a> shell blog engine. <a href="https://github.com/dknight/whoopee">Source code</a></p><p>Any images on this website may be used, copied and redistributed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license.</p><p>Any code on this website may be used, copied and redistributed under the <a href="https://opensource.org/license/MIT">MIT</a> license.</p><p>This website <strong>does not</strong> use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</p></footer></body></html>