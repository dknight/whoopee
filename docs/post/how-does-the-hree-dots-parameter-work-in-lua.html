<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="A function that can accept a variable number of arguments is called a variadic function, which is indicated by three dots ('...') vararg expressions at the end of its argument list. Explanation of how variadic functions and vararg expression work in Lua. " name=description><meta content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal" name=keywords><meta content="Dmitri Smirnov" name=author><meta content=website property=og:type><meta content=https://www.whoop.ee/post/how-does-the-hree-dots-parameter-work-in-lua.html property=og:url><meta content=https://www.whoop.ee/assets/img/whoopee-logo.png property=og:image><meta content="script-src 'self'" http-equiv=Content-Security-Policy><meta content="object-src 'none'" http-equiv=Content-Security-Policy><title>How does the three dots parameter work in Lua? — Whoopee</title><link as=font href=/assets/fonts/Perfect_DOS_VGA_437.woff2 rel=preload><link href=/favicon.ico rel=icon type=image/x-icon><link href=/assets/css/styles.min.css rel=stylesheet><link title="RSS Feed" href=/feed.xml rel=alternate type=application/rss+xml><link href=https://www.whoop.ee/post/how-does-the-hree-dots-parameter-work-in-lua.html rel=canonical><body><header><a href=/><img alt=Whoopee class=logo height=172 src=/assets/img/whoopee-logo.png width=200></a><nav class=mainmenu><a href=/me/>About</a><a href=/feed.xml>RSS</a></nav></header><main><a href=/>← Back to the index page</a><article><h1>How does the three dots parameter work in Lua?</h1><time datetime=2024-10-21> October 21, 2024 </time><p>A function in Lua can accept any number of arguments from zero to any amount. There might be a case where there is no exact number of arguments; <code>string.format</code>, from the standard library, is a good example of such a function. Where the first argument is format string with specifiers and after follow variables corresponding to the specifiers. The signature of this function is <code>string.format(formatstring, ...)</code>. Such a function is called <em>variadic</em>, which means that the number of parameters is not determined. Variadic function is indicated by three dots <code>...</code>, called <em>vararg expression</em>.<p>Consider:<div class=codehilite><pre><span></span><code><span class=c1>-- no arguments</span>
<span class=kd>local</span> <span class=kr>function</span> <span class=nf>sayHello</span><span class=p>()</span>
    <span class=kr>return</span> <span class=s2>"Hello"</span>
<span class=kr>end</span>

<span class=c1>-- 2 arguments</span>
<span class=kd>local</span> <span class=kr>function</span> <span class=nf>sum2</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
    <span class=kr>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
<span class=kr>end</span>

<span class=c1>-- variadic function with undetermined number of arguments</span>
<span class=kd>local</span> <span class=kr>function</span> <span class=nf>sum</span><span class=p>(...)</span>
    <span class=c1>-- sum all arguments</span>
<span class=kr>end</span> 
</code></pre></div><p><em>vararg expression</em> (<code>...</code>) contains a list of arguments, <em>vararg expression</em> <strong>always</strong> should be the last in the argument list.<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=kr>function</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...)</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...)</span>
<span class=kr>end</span>

<span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=c1>--> 1    2   3   4   5</span>
</code></pre></div><p>Making a table from <em>vararg expression</em> using table constructor <code>{}</code>:<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=kr>function</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...)</span>
    <span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...}</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=o>#</span><span class=n>t</span><span class=p>)</span>
<span class=kr>end</span>

<span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=c1>--> table:   0x11c2fc0   5</span>
</code></pre></div><div class="admonition warning"><p class=admonition-title>Warning<p>Here is the caveat: if in <em>varag expression</em> one of the values is <code>nil</code>, then <code>{...}</code> might not be a sequence. To avoid this, there is a function from the table module: <code>table.pack</code>.<p><code>lua
function variadicFn(...)
  local args = table.pack(...)
  --[[ rest of code ]]
end</code><p>Also, consider that table constructor <code>{}</code> works much faster than <code>table.pack</code>. I would recommend making a habit, always avoid <code>nil</code> values in the Lua tables.</div><p>Finally, let’s finish our sum.<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=kr>function</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...)</span>
    <span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...}</span>
    <span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=kr>for</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=o>#</span><span class=n>t</span> <span class=kr>do</span>
        <span class=n>s</span> <span class=o>=</span> <span class=n>s</span> <span class=o>+</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>
    <span class=kr>end</span>
  <span class=kr>return</span> <span class=n>s</span>
<span class=kr>end</span>

<span class=nb>print</span><span class=p>(</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span> <span class=c1>--> 15</span>
</code></pre></div><p>Destruct <em>vararg expression</em> arguments to variables.<div class=codehilite><pre><span></span><code><span class=kd>local</span> <span class=kr>function</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=p>...)</span>
  <span class=kd>local</span> <span class=n>c</span><span class=p>,</span> <span class=n>d</span><span class=p>,</span> <span class=n>e</span> <span class=o>=</span> <span class=p>...</span>
  <span class=kr>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span> <span class=o>+</span> <span class=n>d</span> <span class=o>+</span> <span class=n>e</span>
<span class=kr>end</span>

<span class=nb>print</span><span class=p>(</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span> <span class=c1>--> 15</span>
</code></pre></div><p>In the example above, if any parameter is a non-number, then function will fail because the interpreter will try to sum non-numbers. This example is only for demonstration, in real code type checking and error handling should be done.<h2 id=word-of-warning>Word of warning<a title="Permanent link" class=headerlink href=#word-of-warning>#</a></h2><p>There might be issues that might be caused by using <em>vararg expression</em>. On <a href=http://lua-users.org/wiki/VarargTheSecondClassCitizen>lua-users.org there is full article</a> about potential problems with <em>vararg expression</em>. In my daily job, I’d like to avoid such complex solutions, if possible. Code readability and maintainability are always one of the top priorities for me.<div class="admonition tip"><p class=admonition-title>Tip<p>In JavaScript, <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters>rest parameters</a> works mostly the same as <em>vararg expression</em> in Lua.</div><h2 id=references>References<a title="Permanent link" class=headerlink href=#references>#</a></h2><ul><li><a href=https://www.lua.org/manual/5.4/manual.html#3.3.6>Lua Manual: Function Definitions</a><li><a href=https://www.lua.org/manual/5.4/manual.html#pdf-string.format>Lua Manual: string.format</a><li><a href=http://lua-users.org/wiki/VarargTheSecondClassCitizen>lua-users.org: Vararg The Second Class Citizen</a><li><a href=https://www.lua.org/pil/5.2.html>Programming in Lua: Variable Number of Arguments</a></ul><h2>Feedback</h2><p>For feedback, please check the <a href=/me/>contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</article><a href=/>← Back to the index page</a></main><footer><hr><p>(c) 2022-2025 <a href=/me/>xdknight</a> Powered by <a href=https://github.com/hmngwy/jenny>Jenny</a> shell blog engine.<p>Any images on this website may be used, copied and redistributed under the <a href=https://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a> license.<p>Any code on this website may be used, copied and redistributed under the <a href=https://opensource.org/license/MIT>MIT</a> license.<p>This website does not use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</footer>