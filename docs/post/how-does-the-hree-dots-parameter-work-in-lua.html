<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="A function that can accept a variable number of arguments is called a variadic function, which is indicated by three dots ('...') vararg expressions at the end of its argument list. Explanation of how variadic functions and vararg expression work in Lua. "><meta name="keywords" content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal"><meta name="author" content="Dmitri Smirnov"><meta property="og:type" content="website"><meta property="og:url" content="https://www.whoop.ee/post/how-does-the-hree-dots-parameter-work-in-lua.html"><meta property="og:image" content="https://www.whoop.ee/assets/img/lua-language.gif"><meta http-equiv="Content-Security-Policy" content="script-src 'self'"><meta http-equiv="Content-Security-Policy" content="object-src 'none'"><title>How does the three dots parameter work in Lua? &mdash; Whoopee</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/css/styles.min.css"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"><link rel="canonical" href="https://www.whoop.ee/post/how-does-the-hree-dots-parameter-work-in-lua.html"></head><body><header><a href="/" class="logo">Whoopee</a><nav class="mainmenu"><a href="/me/">About</a> <a href="/feed.xml">RSS</a></nav></header><main><a href="/"><em>&larr; Back to the index page</em></a><article><h1>How does the three dots parameter work in Lua?</h1><time datetime="2024-10-21">October 21, 2024</time><p>A function in Lua can accept any number of arguments from zero to any amount. There might be a case where there is no exact number of arguments; <code>string.format</code>, from the standard library, is a good example of such a function. Where the first argument is format string with specifiers and after follow variables corresponding to the specifiers. The signature of this function is <code>string.format(formatstring, ...)</code>. Such a function is called <em>variadic</em>, which means that the number of parameters is not determined. Variadic function is indicated by three dots <code>...</code>, called <em>vararg expression</em>.</p><p>Consider:</p><div class="codehilite"><pre><span></span><code><span class="c1">-- no arguments</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">sayHello</span><span class="p">()</span>
    <span class="kr">return</span> <span class="s2">&quot;Hello&quot;</span>
<span class="kr">end</span>

<span class="c1">-- 2 arguments</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">sum2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="kr">end</span>

<span class="c1">-- variadic function with undetermined number of arguments</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">sum</span><span class="p">(...)</span>
    <span class="c1">-- sum all arguments</span>
<span class="kr">end</span> 
</code></pre></div><p><em>vararg expression</em> (<code>...</code>) contains a list of arguments, <em>vararg expression</em> <strong>always</strong> should be the last in the argument list.</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...)</span>
<span class="kr">end</span>

<span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">--&gt; 1    2   3   4   5</span>
</code></pre></div><p>Making a table from <em>vararg expression</em> using table constructor <code>{}</code>:</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...)</span>
    <span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...}</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="o">#</span><span class="n">t</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">--&gt; table:   0x11c2fc0   5</span>
</code></pre></div><div class="admonition warning"><p class="admonition-title">Warning</p><p>Here is the caveat: if in <em>varag expression</em> one of the values is <code>nil</code>, then <code>{...}</code> might not be a sequence. To avoid this, there is a function from the table module: <code>table.pack</code>.</p><p><code>lua function variadicFn(...) local args = table.pack(...) --[[ rest of code ]] end</code></p><p>Also, consider that table constructor <code>{}</code> works much faster than <code>table.pack</code>. I would recommend making a habit, always avoid <code>nil</code> values in the Lua tables.</p></div><p>Finally, let&rsquo;s finish our sum.</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...)</span>
    <span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...}</span>
    <span class="kd">local</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">t</span> <span class="kr">do</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">s</span>
<span class="kr">end</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="c1">--&gt; 15</span>
</code></pre></div><p>Destruct <em>vararg expression</em> arguments to variables.</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="kr">function</span> <span class="nf">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...)</span>
  <span class="kd">local</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="p">...</span>
  <span class="kr">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span> <span class="o">+</span> <span class="n">e</span>
<span class="kr">end</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="c1">--&gt; 15</span>
</code></pre></div><p>In the example above, if any parameter is a non-number, then function will fail because the interpreter will try to sum non-numbers. This example is only for demonstration, in real code type checking and error handling should be done.</p><h2 id="word-of-warning">Word of warning<a class="headerlink" href="#word-of-warning" title="Permanent link">&para;</a></h2><p>There might be issues that might be caused by using <em>vararg expression</em>. On <a href="http://lua-users.org/wiki/VarargTheSecondClassCitizen">lua-users.org there is full article</a> about potential problems with <em>vararg expression</em>. In my daily job, I&rsquo;d like to avoid such complex solutions, if possible. Code readability and maintainability are always one of the top priorities for me.</p><div class="admonition tip"><p class="admonition-title">Tip</p><p>In JavaScript, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest parameters</a> works mostly the same as <em>vararg expression</em> in Lua.</p></div><h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2><ul><li><a href="https://www.lua.org/manual/5.4/manual.html#3.3.6">Lua Manual: Function Definitions</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#pdf-string.format">Lua Manual: string.format</a></li><li><a href="http://lua-users.org/wiki/VarargTheSecondClassCitizen">lua-users.org: Vararg The Second Class Citizen</a></li><li><a href="https://www.lua.org/pil/5.2.html">Programming in Lua: Variable Number of Arguments</a></li></ul><h2>Feedback</h2><p>For feedback, please check the <a href="/me/">contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</p></article><a href="/"><em>&larr; Back to the index page</em></a></main><footer><hr><p>&copy; 2022&mdash;2025 <a href="/me/">xdknight</a> Powered by <a href="https://github.com/hmngwy/jenny">Jenny</a> shell blog engine. <a href="https://github.com/dknight/whoopee">Source code</a></p><p>Any images on this website may be used, copied and redistributed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license.</p><p>Any code on this website may be used, copied and redistributed under the <a href="https://opensource.org/license/MIT">MIT</a> license.</p><p>This website <strong>does not</strong> use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</p></footer></body></html>