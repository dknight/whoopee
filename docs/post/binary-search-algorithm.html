<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Explore the power and versatility of Lua programming language. From beginner tutorials to advanced techniques. From beginner tutorials to advanced techniques, dive into Lua's elegant syntax and discover its applications in game development, scripting, embedded software and more. Also some useful stuff for web-development."><meta name="keywords" content="lua, programming, algorithms, data-structures, gamedev, game development, blog, personal"><meta name="author" content="Dmitri Smirnov"><meta property="og:type" content="website"><meta property="og:url" content="https://www.whoop.ee/post/binary-search-algorithm.html"><meta property="og:image" content="https://www.whoop.ee/assets/img/whoopee-logo.png"><meta http-equiv="Content-Security-Policy" content="script-src 'self'"><meta http-equiv="Content-Security-Policy" content="object-src 'none'"><title>Binary Search Algorithm &mdash; Whoopee</title><link rel="preload" href="/assets/fonts/Perfect_DOS_VGA_437.woff2" as="font"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/css/styles.min.css"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"><link rel="canonical" href="https://www.whoop.ee/post/binary-search-algorithm.html"></head><body><header><a href="/"><img src="/assets/img/whoopee-logo.png" width="200" height="172" alt="Whoopee" class="logo"></a><nav class="mainmenu"><a href="/me/">About</a> <a href="/feed.xml">RSS</a></nav></header><main><a href="/">&larr; Back to the index page</a><article><h1>Binary Search Algorithm</h1><time datetime="2024-08-05">August 05, 2024</time><div><input type="checkbox" class="toc-toggle" id="toc-toggle"> <label for="toc-toggle">Table of contents</label></div><div class="toc"><ul><li><a href="#binary-search-algorithm">Binary Search Algorithm</a><ul><li><a href="#presquities-to-use-binary-search">Presquities to use Binary Search</a></li><li><a href="#linear-search-vs-binary-search">Linear Search vs Binary Search</a></li><li><a href="#algorithm">Algorithm</a></li><li><a href="#implemtatation">Implemtatation</a></li><li><a href="#number-of-maximum-iterations">Number of maximum iterations</a></li><li><a href="#bonus-issorted-function">Bonus. isSorted() function</a></li><li><a href="#references">References</a></li></ul></li></ul></div><p>An algorithm known as binary search is used to locate a target value&rsquo;s position (index) within a <strong>sorted array</strong>. Until the target value is found or the interval is empty, it operates by halving the search interval iteratively. By comparing the target element with the search space&rsquo;s middle value, the search interval is cut in half. Such method used method is known as <a href="https://en.wikipedia.org/wiki/Dichotomy">dichotomy</a>, in Greek language it means &ldquo;divided by two&rdquo;.</p><div class="admonition tip"><p class="admonition-title">Tip</p><p>If there is a task to find something in sorted data, the binary search is the way worth trying first.</p></div><h2 id="presquities-to-use-binary-search">Presquities to use Binary Search<a class="headerlink" href="#presquities-to-use-binary-search" title="Permanent link">#</a></h2><ul><li>Array or similar data structures must be sorted.</li><li>Access to any element of the array/data structure should take constant time. (In Lua accessing table&rsquo;s element by index has complexity <em>O(1)</em> by default.)</li></ul><h2 id="linear-search-vs-binary-search">Linear Search vs Binary Search<a class="headerlink" href="#linear-search-vs-binary-search" title="Permanent link">#</a></h2><p>For smaller data sets with few elements, there is no big difference between linear and binary search. The difference becomes huge if there are many more records like millions and billions. Linear search has complexity <em>O(n)</em>, which means the time of the algorithm will grow linearly. Consider, an array with numbers from 1 to 100, if we want to find the number 42, we need to start from 1 and go for each element and compare if it equals 42 or the array ends and the search target is not found. In the best case, if we search for the number 1 only one iteration is needed. The worst case is for the number 100 and the same number of the iterations is required correspondingly. Reminder from school math class linear function&rsquo;s equation <em>f(x)=x</em>.</p><p>Binary search has complexity <em>O(log(n))</em>, which will require much fewer iterations rather than <em>O(n)</em> when the number of records becomes larger.</p><h2 id="algorithm">Algorithm<a class="headerlink" href="#algorithm" title="Permanent link">#</a></h2><p>Considering we have an array, the target element will be 79.</p><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="n">arr</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">120</span> <span class="p">}</span>
</code></pre></div><ol><li>Find the middle (<strong>mid</strong>) index, sum or lower (<strong>low</strong>) and higher (<strong>high</strong>) of the array divided by two halves.</li><li>Compare the middle element to the target (79).</li><li>If the middle element is equal to the target (79) then return it (found with 1 attempt).<ol><li>If the middle element is larger than the target (79), then the part (right) after the current middle will be used for the next search.</li><li>If the middle element is smaller than the target (79), then the part (left) before the current middle will be used for the next search</li></ol></li><li>Continue the procedure until the target is found or the search interval is empty return <code>nil</code>.</li></ol><p><img alt="Figure 01. Binary Search" src="/assets/img/binary-search.svg"></p><h2 id="implemtatation">Implemtatation<a class="headerlink" href="#implemtatation" title="Permanent link">#</a></h2><div class="codehilite"><pre><span></span><code><span class="c1">---Searches the value in sorted &#39;t&#39; table using binary search</span>
<span class="c1">---algorithm. Retuns nil if value not found.</span>
<span class="c1">---@param t table</span>
<span class="c1">---@param x any</span>
<span class="c1">---@return number|nil</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">low</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="kd">local</span> <span class="n">high</span> <span class="o">=</span> <span class="o">#</span><span class="n">t</span>
    <span class="kd">local</span> <span class="n">mid</span>
    <span class="kr">while</span> <span class="n">high</span> <span class="o">&gt;=</span> <span class="n">low</span> <span class="kr">do</span>
        <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="kr">if</span> <span class="n">t</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span> <span class="kr">then</span>
            <span class="kr">return</span> <span class="n">mid</span>
        <span class="kr">elseif</span> <span class="n">t</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="kr">then</span>
            <span class="n">high</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="kr">else</span>
            <span class="n">low</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
    <span class="kr">return</span> <span class="kc">nil</span>
<span class="kr">end</span>
</code></pre></div><h2 id="number-of-maximum-iterations">Number of maximum iterations<a class="headerlink" href="#number-of-maximum-iterations" title="Permanent link">#</a></h2><p>There is a simple math formula to calculate a possible number of iterations.</p><p><em>n=⌊log<sub>2</sub>(r)⌉</em> (rounded to upper integer value)</p><p>Where: <strong>n</strong> &ndash; number of iterations, <strong>r</strong> &ndash; range;</p><table><thead><tr><th>Range (r)</th><th>log(r)</th><th>Approx.</th><th>Iterations*</th></tr></thead><tbody><tr><td>10</td><td>log<sub>2</sub>(10<sup>1</sup>)</td><td>3.322</td><td>4</td></tr><tr><td>100</td><td>log<sub>2</sub>(10<sup>2</sup>)</td><td>6.644</td><td>7</td></tr><tr><td>1 000</td><td>log<sub>2</sub>(10<sup>3</sup>)</td><td>9.966</td><td>10</td></tr><tr><td>10 000</td><td>log<sub>2</sub>(10<sup>4</sup>)</td><td>13.288</td><td>14</td></tr><tr><td>100 000</td><td>log<sub>2</sub>(10<sup>5</sup>)</td><td>16.61</td><td>17</td></tr><tr><td>1 000 000</td><td>log<sub>2</sub>(10<sup>6</sup>)</td><td>19.93</td><td>20</td></tr><tr><td>10 000 000</td><td>log<sub>2</sub>(10<sup>7</sup>)</td><td>23.253</td><td>24</td></tr><tr><td>100 000 000</td><td>log<sub>2</sub>(10<sup>8</sup>)</td><td>26.575</td><td>27</td></tr><tr><td>1 000 000 000</td><td>log<sub>2</sub>(10<sup>8</sup>)</td><td>29.9</td><td>30</td></tr><tr><td>10 000 000 000</td><td>log<sub>2</sub>(10<sup>10</sup>)</td><td>33.22</td><td>34</td></tr><tr><td>10<sup>20</sup></td><td>log<sub>2</sub>(10<sup>20</sup>)</td><td>66.44</td><td>67</td></tr><tr><td>10<sup>100</sup></td><td>log<sub>2</sub>(10<sup>100</sup>)</td><td>332.2</td><td>333</td></tr><tr><td>10<sup>300</sup></td><td>log<sub>2</sub>(10<sup>300</sup>)</td><td>999.6</td><td>1000</td></tr></tbody></table><p>* The approximate value is rounded to the upper integer, to get the iteration count.</p><h2 id="bonus-issorted-function">Bonus. <code>isSorted()</code> function<a class="headerlink" href="#bonus-issorted-function" title="Permanent link">#</a></h2><p>The Function to check is that the array is sorted in ascending order as complexity <em>O(n)</em>.</p><div class="codehilite"><pre><span></span><code><span class="c1">---@param t table</span>
<span class="c1">---@return boolean</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">isSorted</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="o">#</span><span class="n">t</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="kr">then</span>
            <span class="kr">return</span> <span class="kc">false</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
    <span class="kr">return</span> <span class="kc">true</span>
<span class="kr">end</span>

<span class="c1">-- examples</span>

<span class="kd">local</span> <span class="n">t1</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">isSorted</span><span class="p">(</span><span class="n">t1</span><span class="p">))</span> <span class="c1">--&gt; true</span>

<span class="kd">local</span> <span class="n">t2</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">isSorted</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span> <span class="c1">--&gt; false</span>
</code></pre></div><h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">#</a></h2><ul><li><a href="https://en.wikipedia.org/wiki/Dichotomy">Wikipedia: Dichotomy</a></li><li><a href="https://en.wikipedia.org/wiki/Logarithm">Wikipedia: Logarithm</a></li><li><a href="https://www.geeksforgeeks.org/binary-search/">GeeksForGeeks: Binary Search</a></li></ul><h2>Feedback</h2><p>For feedback, please check the <a href="/me/">contacts</a> section. Before writing, please specify where you came from and who you are. Sometimes spammers go insane. Thank you in advance for your understanding.</p></article><a href="/">&larr; Back to the index page</a></main><footer><hr><p>(c) 2022-2025 <a href="/me/">xdknight</a> Powered by <a href="https://github.com/hmngwy/jenny">Jenny</a> shell blog engine.</p><p>Any images on this website may be used, copied and redistributed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license.</p><p>Any code on this website may be used, copied and redistributed under the <a href="https://opensource.org/license/MIT">MIT</a> license.</p><p>This website does not use cookies or any tracking techniques either. Also, this page is fully accessible, responsive, and readable on any device without a single line of JavaScript.</p></footer></body></html>